(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{203:function(e,t,a){e.exports=a(275)},208:function(e,t,a){},275:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(15),l=a.n(c),i=(a(208),a(11)),o=a(26),s=a(151),u=(a(214),"SHOW_SIDEBAR"),m="HIDE_SIDEBAR";var d={sidebarOpened:!1},f="NOTIFICATION_SHOW",h="NOTIFICATION_HIDE",p="NOTIFICATION_SET",E=[],g=0;function b(){return{type:h}}function v(e){return function(t,a){var n=a().notification.opened;E.push(e),t(n?b():O())}}function O(){return function(e){var t;E.length&&(e((t=E.shift(),{type:p,messageText:t,messageKey:++g})),e({type:f}))}}var C,y={opened:!1,messageText:"",messageKey:""},j=a(10),k=a(54),S="https://gth-talk-stranger-cfs.herokuapp.com/api",w="/",I="true"===Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_SERVER_URL:"https://gth-talk-stranger-cfs.herokuapp.com/api",REACT_APP_BASE_DIR:"/",REACT_APP_LOG_LEVEL:"2"}).REACT_APP_HASH_ROUTER,R=a(18),x={UNCHECKED:0,REJECTED:1,APPROVED:2},T=[{value:x.UNCHECKED,label:"Ch\u1edd duy\u1ec7t"},{value:x.REJECTED,label:"T\u1eeb ch\u1ed1i"},{value:x.APPROVED,label:"\u0110\xe3 duy\u1ec7t"}],N=20,_={ADMIN:1,MODERATOR:2},D={PENDING:1,IGNORE:2,INVALID:3,BLOCKED_USER:4,BLOCKED_REPORTER:5,DISABLE_USER:6,DISABLE_REPORTER:7,MARK_USER_AS_SPAMMER:8},F=(C={},Object(R.a)(C,D.PENDING,"Ch\u1edd duy\u1ec7t"),Object(R.a)(C,D.IGNORE,"B\u1ecf qua"),Object(R.a)(C,D.INVALID,"Report l\xe1o"),Object(R.a)(C,D.BLOCKED_USER,"Kh\xf3a user"),Object(R.a)(C,D.BLOCKED_REPORTER,"Kh\xf3a reporter"),Object(R.a)(C,D.DISABLE_USER,"Disable user"),Object(R.a)(C,D.DISABLE_REPORTER,"Disable reporter"),Object(R.a)(C,D.MARK_USER_AS_SPAMMER,"Mark user as spammer"),C),A={SM:"@media (min-width: 600px)",MD:"@media (min-width: 960px)",LG:"@media (min-width: 1280px)",XL:"@media (min-width: 1920px)"},P=window.localStorage;function U(e){return B(_.ADMIN,e.role)}function M(e){return B(_.MODERATOR,e.role)}function B(e,t){return t>0&&(t&e)===e}function L(e){P.setItem("token",e)}var H={"Content-Type":"application/json"};function z(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K(e,Object.assign({headers:q(H),mode:"cors"},t))}function G(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return K(e,Object.assign({method:"POST",body:JSON.stringify(t),headers:q(H),mode:"cors"},a))}function K(e,t){var a=new URL("".concat(S).concat(e));return t.qs&&Object.keys(t.qs).forEach(function(e){var n=t.qs[e];void 0!==n&&a.searchParams.append(e,n)}),fetch(a,t).then(W).then(V)}function W(e){return e.ok?e.json():Promise.reject(e)}function V(e){return e.error_code?Promise.reject(e):e}function q(e){var t=P.getItem("token");return t?Object.assign({authorization:"bearer "+t},e):e}var J={list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.limit,a=void 0===t?10:t,n=e.offset;return z("/confessions",{qs:{limit:a,offset:void 0===n?0:n,status:e.status}})},update:function(e,t){return G("/confessions/".concat(e),t)}},Y={getCurrentUser:function(){return z("/auth/user")},login:function(e){return G("/auth/login",{username:e.username,password:e.password})}},X={listUsers:function(){return z("/admin/users")},getUser:function(e){return z("/admin/users/".concat(e))},blockUser:function(e){return G("/admin/users/".concat(e,"/block"))},forceUserCloseChat:function(e){return G("/admin/users/".concat(e,"/closechat"))},markUserAsSpammer:function(e,t){return G("/admin/users/".concat(e,"/mark-as-spammer"),{timestamp:t})},addWarning:function(e,t){return G("/admin/users/".concat(e,"/add-warning"),t)},listMappings:function(){return z("/admin/mappings")},addMapping:function(e){return G("/admin/mappings",{waiter:e.waiter,target:e.target})},removeMapping:function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return K(e,Object.assign({method:"DELETE",headers:q(H),mode:"cors"},t))}("/admin/mappings/".concat(e))}},Q={unblockUser:function(e){return G("/mod/users/".concat(e,"/unblock"))},getUserProfile:function(e){return z("/mod/users/".concat(e))}},Z={list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.limit,a=void 0===t?10:t,n=e.offset;return z("/active-users/list",{qs:{limit:a,offset:void 0===n?0:n,gender:e.gender,lastActive:e.lastActive,age:e.age}})}},$={list:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.limit,a=void 0===t?10:t,n=e.offset,r=void 0===n?0:n,c=e.sortBy,l=Object(k.a)(e,["limit","offset","sortBy"]);return z("/user-reports",{qs:Object(j.a)({limit:a,offset:r,sortBy:c},l)})},update:function(e,t){return G("/user-reports/".concat(e),t)},updateMany:function(e,t){return G("/user-reports/update-many",{ids:e,status:t})}},ee="C_FETCH_REQUEST",te="C_FETCH_SUCCESS",ae="C_SET_STATUS_FILTER",ne="C_TOGGLE_STATUS",re="C_SET_NUMBER",ce="SET_LAST_NUMBER",le="SET_MINUTES_BETWEEN_POSTS",ie="SET_LAST_PUBLISH_TIME";function oe(e,t){return{type:ne,id:e,status:t}}function se(e,t){return function(a,n){var r=n().confessions.lastNumber;t>r&&a(ue(t)),a(function(e,t){return{type:re,id:e,number:t}}(e,t))}}function ue(e){return{type:ce,payload:e}}function me(e){return{type:ie,payload:e}}function de(e){return function(t,a){var n=a().confessions,r=n.items,c=n.lastNumber,l=r.filter(function(t){return t.id===e})[0];if(l){var i=l.status===x.APPROVED?x.UNCHECKED:x.APPROVED,o=l.number||i!==x.APPROVED?void 0:c+1;return J.update(l.id,{status:i,number:o}).then(function(){t(oe(e,i)),o&&t(se(e,c+1))})}}}function fe(e){return function(t,a){var n=a().confessions.items.filter(function(t){return t.id===e})[0];if(n){var r=n.status===x.REJECTED?x.UNCHECKED:x.REJECTED;return J.update(n.id,{status:r}).then(function(){t(oe(e,r))})}}}function he(e){return function(t,a){t({type:ee});var n=a().confessions.statusFilter,r={limit:N,offset:N*e};return n>-1&&(r.status=n),J.list(r).then(function(a){t(function(e,t,a){return{type:te,items:e,total:t,page:a}}(a.data.items,a.data.total,e))})}}function pe(){return function(e,t){return e(he(t().confessions.page))}}function Ee(e){return function(t){return t(function(e){return{type:ae,status:e}}(e)),t(he(0))}}function ge(e,t){return function(a){return J.update(e,{number:t}).then(function(){return a(se(e,t))})}}var be={items:[],total:0,page:0,isFetching:!1,statusFilter:x.UNCHECKED,lastNumber:0,minutesBetweenPost:15,lastPublishTime:0},ve="SET_USER";function Oe(e){return{type:ve,user:e}}function Ce(e){var t=e.username,a=e.password;return function(e){return Y.login({username:t,password:a}).then(function(t){L(t.data.token),e(Oe(t.data))}).catch(function(){e(v("Failed"))})}}var ye={user:null},je={ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d;switch((arguments.length>1?arguments[1]:void 0).type){case u:return Object.assign({},e,{sidebarOpened:!0});case m:return Object.assign({},e,{sidebarOpened:!1});default:return e}},notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return Object.assign({},e,{opened:!0});case h:return Object.assign({},e,{opened:!1});case p:return Object.assign({},e,{messageKey:t.messageKey,messageText:t.messageText});default:return e}},confessions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return Object.assign({},e,{isFetching:!0});case te:return Object.assign({},e,{items:t.items,total:t.total,page:t.page,isFetching:!1});case ae:return Object.assign({},e,{statusFilter:t.status});case ne:return Object.assign({},e,{items:e.items.map(function(e){return e.id===t.id?Object.assign({},e,{status:t.status===e.status?0:t.status}):e})});case re:return Object.assign({},e,{items:e.items.map(function(e){return e.id===t.id?Object.assign({},e,{number:t.number}):e})});case ce:return Object(j.a)({},e,{lastNumber:t.payload});case le:return Object(j.a)({},e,{minutesBetweenPost:t.payload});case ie:return Object(j.a)({},e,{lastPublishTime:t.payload});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ve:return Object(j.a)({},e,{user:t.user});default:return e}}},ke=[s.a],Se=Object(o.d)(Object(o.c)(je),o.a.apply(void 0,ke)),we=a(66),Ie=a(24),Re=a(6),xe=a(356);var Te=Object(i.b)(function(e,t){var a=e.auth.user,n=t.authzCheck,r=void 0===n||n,c=!0;return!0===r?c=a&&function(e){return M(e)||U(e)}(a):Array.isArray(r)&&(c=a&&r.some(function(e){return B(e,a.role)})),{isAuthenticated:!!a,isAllowed:c}},function(e){return{}})(function(e){var t=e.component,a=e.isAuthenticated,n=e.isAllowed,c=Object(k.a)(e,["component","isAuthenticated","isAllowed"]);return r.a.createElement(Ie.c,Object.assign({},c,{render:function(e){return a?n?r.a.createElement(t,e):r.a.createElement(Ie.b,{to:{pathname:"/forbidden",state:{from:e.location}}}):r.a.createElement(Ie.b,{to:{pathname:"/login",state:{from:e.location}}})}}))}),Ne=a(14),_e=a.n(Ne),De=a(324),Fe=Object(De.a)({container:{height:"100%"},hasSidebar:{marginRight:240}}),Ae=function(e){var t=e.children,a=e.className,n=e.hasSidebar,c=Fe();return r.a.createElement("div",{className:_e()(c.container,n&&c.hasSidebar,a)},t)},Pe=a(282),Ue=a(340),Me=a(52),Be=a(358),Le=a(332);var He=Object(i.b)(function(e){var t=e.confessions;return{confessions:t.items,statusFilter:t.statusFilter}},function(e){return Object(o.b)({loadPage:he,applyStatusFilter:Ee},e)})(function(e){var t=e.statusFilter,a=e.applyStatusFilter;return r.a.createElement(Be.a,{value:t,onChange:function(e){a(parseInt(e.target.value))},disableUnderline:!0},r.a.createElement(Le.a,{value:-1},"T\u1ea5t c\u1ea3"),T.map(function(e){return r.a.createElement(Le.a,{key:e.value,value:e.value},e.label)}))}),ze=a(39),Ge=a(40),Ke=a(43),We=a(41),Ve=a(42),qe=a(27),Je=a(341),Ye=a(342),Xe=a(343),Qe=a(344),Ze=a(333),$e=a(102),et=a.n($e),tt=a(164),at=a.n(tt),nt=a(163),rt=a.n(nt),ct=a(165),lt=a.n(ct),it=a(360),ot=a(181);function st(e){return[ft(e.getDate()),ft(e.getMonth()+1),ft(e.getFullYear())].join("/")}function ut(e){return[ft(e.getHours()),ft(e.getMinutes())].join(":")}function mt(e){var t=st(new Date(e.createdAt));return"#CVNL".concat(e.number,"\n[").concat(t,"] ").concat(e.content,"\n\n---\n")}function dt(e){if(!e)return 0;var t=Date.now()-e.getTime(),a=new Date(t);return Math.abs(a.getUTCFullYear()-1970)}function ft(e){return e<10?"0".concat(e):String(e)}var ht=a(157),pt=a.n(ht),Et=function(e){function t(){var e,a;Object(ze.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(Ke.a)(this,(e=Object(We.a)(t)).call.apply(e,[this].concat(r)))).handleCopy=function(){a.props.copy(a.props.confession)},a}return Object(Ve.a)(t,e),Object(Ge.a)(t,[{key:"render",value:function(){return r.a.createElement(it.a,{title:"Copy \u0111\u1ec3 \u0111\u0103ng Facebook"},r.a.createElement(Ze.a,{style:{color:"orange"},"aria-label":"Copy",onClick:this.handleCopy},r.a.createElement(pt.a,{fontSize:"small"})))}}]),t}(r.a.Component),gt=a(158),bt=a.n(gt);var vt=Object(i.b)(function(e){return{}},function(e){return{copy:function(t){var a=mt(t);return bt()(a).then(function(){e(v("Copied"))})}}})(Et),Ot=a(334),Ct=a(335),yt=a(336),jt=a(337),kt=a(359),St=a(338),wt=a(357),It=a(339),Rt=a(159),xt=a.n(Rt),Tt=a(95),Nt=a.n(Tt),_t=(a(142),{postToPage:function(e,t){return G("/facebook/postToPage",{message:e,publishTime:t})},getPageFeed:function(){return z("/facebook/getPageFeed")}}),Dt=a(9);function Ft(){var e=r.a.useState(!1),t=Object(Dt.a)(e,2),a=t[0],n=t[1];return{open:a,handleOpen:function(){return n(!0)},handleClose:function(){return n(!1)}}}function At(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(n.useState)(e),a=Object(Dt.a)(t,2),r=a[0],c=a[1],l=Object(n.useCallback)(function(e,t){if("string"!==typeof e){var a=e.target,n=a.name,r=a.value,l=a.checked,i=a.type;c(function(e){return Object(j.a)({},e,Object(R.a)({},n,"checkbox"===i?l:r))})}else c(function(a){return Object(j.a)({},a,Object(R.a)({},e,t))})},[]),i=Object(n.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(function(t){return Object(j.a)({},t,e)})},[]);return{values:r,setValues:c,setFields:i,handleChange:l}}function Pt(){var e=Object(i.c)();return{notify:Object(n.useCallback)(function(t){e(v(t))},[])}}var Ut=Object(De.a)(function(){return{scheduleBox:{display:"flex",justifyContent:"flex-end",alignItems:"center"}}});function Mt(e){var t=e.defaultContent,a=void 0===t?"":t,c=e.buttonRender,l=Ut(),o=Object(i.c)(),s=Pt(),u=Ft(),m=u.open,d=u.handleClose,f=u.handleOpen,h=At({message:"",schedule:!1,publishTime:new Date}),p=h.values,E=h.setFields,g=h.handleChange,b=function(){var e=Object(n.useState)(!1),t=Object(Dt.a)(e,2),a=t[0],r=t[1];return{isLoading:a,performAction:Object(n.useCallback)(function(e){return r(!0),Promise.resolve().then(function(){return e()}).then(function(e){return r(!1),e}).catch(function(e){return r(!1),Promise.reject(e)})},[])}}(),v=b.isLoading,O=b.performAction,C=Object(n.useMemo)(function(){return new Date},[]),y=Object(i.d)(function(e){return e.confessions}),j=y.lastPublishTime,k=y.minutesBetweenPost;return Object(n.useEffect)(function(){if(m){var e=!1,t=new Date;j+6e4*k>Date.now()&&(e=!0,t=new Date(j+6e4*k)),E({message:a,schedule:e,publishTime:t})}},[a,j,k,m]),r.a.createElement(r.a.Fragment,null,c?c({onClick:f}):r.a.createElement(Ze.a,{onClick:f,color:"inherit"},r.a.createElement(xt.a,null)),r.a.createElement(Ot.a,{open:m,onClose:d,"aria-labelledby":"form-dialog-title",fullWidth:!0},r.a.createElement(Ct.a,{id:"form-dialog-title"},"\u0110\u0103ng b\xe0i l\xean fan page"),r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,"Ki\u1ec3m tra k\u0129 tr\u01b0\u1edbc khi b\u1ea5m n\xfat \u0111\u0103ng!"),r.a.createElement(kt.a,{autoFocus:!0,margin:"dense",name:"message",value:p.message,onChange:g,label:"N\u1ed9i dung b\xe0i \u0111\u0103ng",type:"text",multiline:!0,rows:4,rowsMax:12,fullWidth:!0}),r.a.createElement("br",null),r.a.createElement("div",{className:l.scheduleBox},r.a.createElement(St.a,{control:r.a.createElement(wt.a,{name:"schedule",checked:p.schedule,onChange:g}),label:"H\u1eb9n gi\u1edd \u0111\u0103ng"}),r.a.createElement(Nt.a,{selected:p.publishTime,onChange:function(e){return g("publishTime",e)},disabled:!p.schedule,minDate:C,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,timeCaption:"time",dateFormat:"dd/MM/yyyy HH:mm",withPortal:!0}))),r.a.createElement(It.a,null,r.a.createElement(Pe.a,{onClick:d},"H\u1ee7y"),r.a.createElement(Pe.a,{onClick:function(){var e=p.schedule?Math.ceil(p.publishTime.getTime()/1e3):void 0;O(function(){return _t.postToPage(p.message,e)}).then(function(){s.notify("\u0110\xe3 \u0111\u0103ng b\xe0i!"),d(),o(me(1e3*e||Date.now()))}).catch(function(){s.notify("C\xf3 l\u1ed7i x\u1ea3y ra!")})},color:"secondary",disabled:!p.message||v},p.schedule?"H\u1eb9n gi\u1edd":"\u0110\u0103ng"))))}var Bt=a(162),Lt=a.n(Bt);function Ht(e){var t=e.confession,a=Object(n.useMemo)(function(){return mt(t)},[t]);return r.a.createElement(Mt,{defaultContent:a,buttonRender:function(e){var t=e.onClick;return r.a.createElement(it.a,{title:"\u0110\u0103ng l\xean page"},r.a.createElement(Ze.a,{onClick:t,style:{color:"#22b6ff"}},r.a.createElement(Lt.a,null)))}})}var zt=Object(n.forwardRef)(function(e,t){var a=e.onClick,c=e.children,l=e.loadingSize,i=void 0===l?16:l,o=Object(k.a)(e,["onClick","children","loadingSize"]),s=Object(n.useState)(!1),u=Object(Dt.a)(s,2),m=u[0],d=u[1],f=Object(n.useCallback)(function(e){d(!0),Promise.resolve().then(function(){return a(e)}).finally(function(){return d(!1)})},[a]);return r.a.createElement(Ze.a,Object.assign({onClick:f,ref:t},o,{disabled:m}),m?r.a.createElement(Ue.a,{size:i}):c)}),Gt=Object(Re.a)(function(e){return{card:{marginTop:e.spacing(1),width:"100%","& .MuiCardHeader-root":{paddingTop:e.spacing(1),paddingBottom:e.spacing(1)},"& .MuiCardHeader-action":{height:44}},cardApproved:{backgroundColor:"#fbfff8"},cardRejected:{backgroundColor:"#efefef"},cardContent:{paddingTop:0,paddingBottom:0},content:{whiteSpace:"pre-wrap"},actions:{display:"flex",justifyContent:"flex-end",paddingTop:0,paddingBottom:0},numberInput:{padding:e.spacing(1),paddingLeft:0,height:32,display:"flex",alignItems:"center"},numberDisplay:{display:"flex",alignItems:"center",height:32},numberDisplayText:{paddingLeft:0,fontSize:"1rem"},editButton:{padding:e.spacing(1)},approvedButton:{color:"green"},metadata:{color:"rgba(0, 0, 0, 0.54)",lineHeight:"44px"}}})(function(e){function t(e){var a;return Object(ze.a)(this,t),(a=Object(Ke.a)(this,Object(We.a)(t).call(this,e))).state={showNumberField:!1,number:0},a._onEditButtonClicked=a._onEditButtonClicked.bind(Object(qe.a)(Object(qe.a)(a))),a._onSaveButtonClicked=a._onSaveButtonClicked.bind(Object(qe.a)(Object(qe.a)(a))),a._onNumberInputChanged=a._onNumberInputChanged.bind(Object(qe.a)(Object(qe.a)(a))),a}return Object(Ve.a)(t,e),Object(Ge.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.confession,n=e.toggleReject,c=e.toggleApprove,l=this.state.showNumberField,i=a.status===x.REJECTED?"secondary":"default",o=a.status===x.APPROVED?t.approvedButton:"",s=a.status===x.APPROVED?rt.a:at.a,u=function(e){return[st(e),ut(e)].join(" ")}(new Date(a.createdAt)),m=t.card;a.status===x.APPROVED?m+=" "+t.cardApproved:a.status===x.REJECTED&&(m+=" "+t.cardRejected);var d=r.a.createElement("div",{className:t.numberInput},r.a.createElement(ot.a,{type:"number",placeholder:"1234...",value:this.state.number,onChange:this._onNumberInputChanged,autoFocus:!0}),r.a.createElement(Pe.a,{size:"small",color:"primary",onClick:this._onSaveButtonClicked},"L\u01b0u")),f=r.a.createElement("div",{className:t.numberDisplay},r.a.createElement(Me.a,{className:t.numberDisplayText,component:"h5"},a.number||"#"),r.a.createElement(it.a,{title:"S\u1eeda s\u1ed1 th\u1ee9 t\u1ef1"},r.a.createElement(Ze.a,{className:t.editButton,"aria-label":"Edit",onClick:this._onEditButtonClicked},r.a.createElement(lt.a,{fontSize:"small"}))));return r.a.createElement(Je.a,{className:m},r.a.createElement(Ye.a,{title:l?d:f,action:r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:t.metadata},"".concat(a.row," | ").concat(u)),a.number?r.a.createElement(vt,{confession:a}):null,a.number?r.a.createElement(Ht,{confession:a}):null)}),r.a.createElement(Xe.a,{className:t.cardContent},r.a.createElement(Me.a,{className:t.content,component:"pre"},a.content)),r.a.createElement(Qe.a,{className:t.actions},r.a.createElement(it.a,{title:"T\u1eeb ch\u1ed1i"},r.a.createElement(zt,{onClick:function(){return n(a.id)},color:i,"aria-label":"T\u1eeb ch\u1ed1i"},r.a.createElement(et.a,null))),r.a.createElement(it.a,{onClick:function(){return c(a.id)},title:"Duy\u1ec7t"},r.a.createElement(zt,{className:o,"aria-label":"Duy\u1ec7t"},r.a.createElement(s,null)))))}},{key:"_onEditButtonClicked",value:function(){this.setState({showNumberField:!0,number:this.props.confession.number||0})}},{key:"_onSaveButtonClicked",value:function(){this.props.updateNumber(this.props.confession.id,this.state.number),this.setState({showNumberField:!1})}},{key:"_onNumberInputChanged",value:function(e){this.setState({number:parseInt(e.target.value)})}}]),t}(r.a.Component));var Kt=Object(i.b)(function(e){return{}},function(e){return Object(o.b)({toggleApprove:de,toggleReject:fe,updateNumber:ge},e)})(Gt);var Wt=r.a.memo(function(e){var t=e.loadPage,a=r.a.useState(1),n=Object(Dt.a)(a,2),c=n[0],l=n[1],i=r.a.useState(!1),o=Object(Dt.a)(i,2),s=o[0],u=o[1],m=function(){return u(!1)};return r.a.createElement("div",null,r.a.createElement(Pe.a,{variant:"outlined",color:"primary",onClick:function(){return u(!0)}},"Go"),r.a.createElement(Ot.a,{open:s,onClose:m,"aria-labelledby":"form-dialog-title"},r.a.createElement(Ct.a,{id:"form-dialog-title"},"Chuy\u1ec3n t\u1edbi trang"),r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,"Nh\u1eadp trang mu\u1ed1n chuy\u1ec3n t\u1edbi:"),r.a.createElement(kt.a,{autoFocus:!0,margin:"dense",id:"page",label:"Trang",type:"number",fullWidth:!0,value:c,onChange:function(e){return l(parseInt(e.target.value))}})),r.a.createElement(It.a,null,r.a.createElement(Pe.a,{onClick:m},"Cancel"),r.a.createElement(Pe.a,{onClick:function(){m(),t(c-1)},color:"primary"},"Go"))))});var Vt=Object(i.b)(function(e){return{}},function(e){return Object(o.b)({loadPage:he},e)})(Wt),qt=Object(De.a)(function(e){return{container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",padding:8},header:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:8,maxWidth:600},list:{maxWidth:600,width:"100%"},pagination:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center",maxWidth:600,marginBottom:8},flexRow:{display:"flex"},nextButton:{marginLeft:e.spacing(1)}}});var Jt=Object(i.b)(function(e){var t=e.confessions;return{confessions:t.items,isFetching:t.isFetching,total:t.total,page:t.page}},function(e){return Object(o.b)({loadPage:he,refresh:pe},e)})(function(e){var t=e.confessions,a=e.isFetching,c=e.total,l=e.page,i=e.refresh,o=e.loadPage,s=qt(),u=Math.ceil(c/N),m=l<1,d=l>=u-1;return Object(n.useEffect)(function(){i()},[]),r.a.createElement("div",{className:s.container},r.a.createElement("div",{className:s.header},r.a.createElement(He,null),r.a.createElement(Pe.a,{variant:"outlined",color:"primary",onClick:i},"T\u1ea3i l\u1ea1i")),u>0&&r.a.createElement("div",{className:s.pagination},r.a.createElement(Pe.a,{variant:"outlined",color:"primary",disabled:m,onClick:function(){o(l-1)}},"Back"),r.a.createElement(Me.a,{variant:"body1"},"".concat(l+1,"/").concat(u," (Total: ").concat(c,")")),r.a.createElement("div",{className:s.flexRow},r.a.createElement(Vt,null),r.a.createElement(Pe.a,{className:s.nextButton,variant:"outlined",color:"primary",disabled:d,onClick:function(){o(l+1)}},"Next"))),a?r.a.createElement(Ue.a,null):r.a.createElement("div",{className:s.list},t.map(function(e){return r.a.createElement(Kt,{key:e.id,confession:e})})),r.a.createElement("br",null),!a&&r.a.createElement(Pe.a,{onClick:i},"T\u1ea3i l\u1ea1i"),r.a.createElement("br",null))});var Yt=function(){return r.a.createElement(Ae,null,r.a.createElement(Jt,null))},Xt=a(133),Qt=Object(De.a)(function(e){return{container:{display:"flex",alignItems:"center",flexDirection:"column",padding:e.spacing(2)},textField:{marginBottom:e.spacing(2)}}});var Zt=Object(i.b)(function(e){return{}},function(e){return Object(o.b)({login:Ce},e)})(function(e){var t=e.login,a=Qt(),n=r.a.useState(!1),c=Object(Dt.a)(n,2),l=c[0],i=c[1],o=At({username:"",password:""}),s=o.values,u=o.handleChange,m=s.username&&s.password&&!l;function d(e){e.preventDefault(),i(!0),t(s).then(function(){return i(!1)})}return r.a.createElement("form",{onSubmit:d,className:a.container,noValidate:!0,autoComplete:"off"},r.a.createElement(kt.a,{autoFocus:!0,id:"username",name:"username",label:"Username",className:a.textField,value:s.username,onChange:u}),r.a.createElement(kt.a,{type:"password",id:"password",name:"password",label:"Password",className:a.textField,value:s.password,onChange:u}),r.a.createElement(Pe.a,{type:"submit",onClick:d,disabled:!m},"Login"),l&&r.a.createElement(Ue.a,{size:20}))}),$t={CHECKING:1,NOT_LOGGED_IN:2},ea=function(e){function t(e){var a;return Object(ze.a)(this,t),(a=Object(Ke.a)(this,Object(We.a)(t).call(this,e))).state={status:$t.CHECKING},a}return Object(Ve.a)(t,e),Object(Ge.a)(t,[{key:"componentDidMount",value:function(){this._checkLoginStatus()}},{key:"render",value:function(){var e,t=(this.props.location.state||{from:{pathname:"/"}}).from,a=this.state.status,n=this.props,c=n.classes;if(n.isLoggedIn)return r.a.createElement(Ie.b,{to:t});switch(a){case $t.CHECKING:e=r.a.createElement("div",{className:c.content},r.a.createElement(Me.a,{variant:"h6"},"Just a moment, we are checking your identity..."),r.a.createElement("br",null),r.a.createElement(Ue.a,null));break;case $t.NOT_LOGGED_IN:e=r.a.createElement(Xt.a,{className:c.content},r.a.createElement(Me.a,{variant:"h6"},"May we ask you to login?"),r.a.createElement(Zt,null))}return r.a.createElement(Ae,null,e)}},{key:"_checkLoginStatus",value:function(){var e=this;Y.getCurrentUser().then(function(t){e.props.setUser(t.data)}).catch(function(){e.setState({status:$t.NOT_LOGGED_IN})})}}]),t}(r.a.Component),ta=Object(Re.a)({content:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"50vh"}})(ea);var aa=Object(i.b)(function(e){return{isLoggedIn:!!e.auth.user}},function(e){return Object(o.b)({setUser:Oe},e)})(ta),na=function(e){function t(){return Object(ze.a)(this,t),Object(Ke.a)(this,Object(We.a)(t).apply(this,arguments))}return Object(Ve.a)(t,e),Object(Ge.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,a=e.userDisplayName;return r.a.createElement(Ae,null,r.a.createElement(Xt.a,{className:t.content},r.a.createElement(Me.a,{variant:"h4"},"Forbidden!"),r.a.createElement("br",null),r.a.createElement(Me.a,{variant:"subtitle1"},"Sorry ".concat(a,", we have found that you do not have enough permission to view this page. Please ask people around you for help."))))}}]),t}(r.a.Component),ra=Object(Re.a)({content:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",minHeight:"50vh"}})(na);var ca=Object(i.b)(function(e){var t=e.auth.user;return{userDisplayName:t&&t.name}},function(e){return{}})(ra),la=a(331),ia=a(348),oa=a(347),sa=a(103),ua=a.n(sa),ma=a(280),da=a(346),fa=a(345),ha=a(363),pa=Object(De.a)(function(e){return{container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},inline:{display:"inline"},avatar:{marginRight:10,width:64,height:64}}});function Ea(e){var t=e.user,a=pa(),n=t.accounts?t.accounts.find(function(e){return"firebase"===e.type}):null,c=n?"https://gth-talk-stranger-cfs.herokuapp.com/api/admin/users/get-avatar?id=".concat(n.id):"",l=t.accounts?t.accounts.find(function(e){return"facebook"===e.type}):null,i=l&&l.data&&l.data.age_range||{min:0,max:0},o=r.a.useState(),s=Object(Dt.a)(o,2),u=s[0],m=s[1],d=r.a.useMemo(function(){return t.actualAge?t.actualAge:dt(t.birthday&&new Date(t.birthday))||99},[t]);return r.a.createElement(ma.a,{alignItems:"flex-start",divider:!0},u&&r.a.createElement("img",{width:300,height:300,src:c,alt:"".concat(t.name,"'s avatar"),onClick:function(){return m(!1)}}),r.a.createElement(fa.a,{onClick:function(){return m(!0)}},r.a.createElement(ha.a,{alt:"".concat(t.name,"'s avatar"),src:c,className:a.avatar})),r.a.createElement(da.a,{primary:t.name,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(Me.a,{component:"span",variant:"body2",className:a.inline,color:"textPrimary"},t.id),r.a.createElement("span",null," \u2014 ","min: ",i.min," - max: ",i.max," - actual: ",d),t.lastActive&&r.a.createElement("span",null," \u2014 ","Active: ",new Date(t.lastActive).toLocaleString()),t.client&&r.a.createElement("span",null," \u2014 "," Client: ",t.client))}))}var ga=Object(De.a)(function(e){return{searchField:{backgroundColor:e.palette.background.paper,border:"1px solid #d4d4d4",borderRadius:15,padding:"0 15px",width:260}}});function ba(e){var t=e.onSearch,a=e.onClear,n=e.placeholder,c=void 0===n?"Search":n,l=ga(),i=r.a.useState(""),o=Object(Dt.a)(i,2),s=o[0],u=o[1];return r.a.createElement(ot.a,{id:"search",placeholder:c,type:"search",className:l.searchField,margin:"none",variant:"outlined",name:"search",value:s,onChange:function(e){u(e.target.value),e.target.value||a()},onKeyUp:function(e){13===e.keyCode&&e.target.value&&t(e.target.value)},autoFocus:!0})}var va=Object(Re.a)(function(e){return{container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},listWrapper:{overflow:"auto",width:"100%",maxWidth:800,maxHeight:"calc(100vh - 160px)"},list:{width:"100%",maxWidth:800,backgroundColor:e.palette.background.paper},toolbar:{width:800,alignItems:"center"},grow:{flexGrow:999}}})(function(e){function t(e){var a;return Object(ze.a)(this,t),(a=Object(Ke.a)(this,Object(We.a)(t).call(this,e))).state={isFetching:!0,total:0,femaleUsers:[],maleUsers:[],otherUsers:[],searchUsers:[],showFemale:!0,showMale:!1,showOther:!1,showSearch:!1,showYoung:!1},a._handleFieldChange=a._handleFieldChange.bind(Object(qe.a)(Object(qe.a)(a))),a._handleRefresh=a._handleRefresh.bind(Object(qe.a)(Object(qe.a)(a))),a._handleSearch=a._handleSearch.bind(Object(qe.a)(Object(qe.a)(a))),a._handleSearchClear=a._handleSearchClear.bind(Object(qe.a)(Object(qe.a)(a))),a}return Object(Ve.a)(t,e),Object(Ge.a)(t,[{key:"componentDidMount",value:function(){this._handleRefresh()}},{key:"render",value:function(){var e,t=this.props.classes,a=this.state,n=a.isFetching,c=a.total,l=a.femaleUsers,i=a.maleUsers,o=a.otherUsers,s=a.searchUsers,u=a.showSearch,m=a.showFemale,d=a.showMale,f=a.showOther,h=a.showYoung;return e=n?r.a.createElement(Ue.a,null):u?r.a.createElement("div",{className:t.listWrapper},this._showList("Searching",s)):r.a.createElement("div",{className:t.listWrapper},m&&this._showList("Female",l),d&&this._showList("Male",i),f&&this._showList("Others",o)),r.a.createElement("div",{className:t.container},r.a.createElement(oa.a,{row:!0,className:t.toolbar},r.a.createElement("span",{style:{marginRight:10}},"Total: ",c),r.a.createElement(St.a,{control:r.a.createElement(wt.a,{name:"showFemale",checked:m,onChange:this._handleFieldChange,value:m}),label:"Female"}),r.a.createElement(St.a,{control:r.a.createElement(wt.a,{name:"showMale",checked:d,onChange:this._handleFieldChange,value:d}),label:"Male"}),r.a.createElement(St.a,{control:r.a.createElement(wt.a,{name:"showOther",checked:f,onChange:this._handleFieldChange,value:f}),label:"Other"}),r.a.createElement(St.a,{control:r.a.createElement(wt.a,{name:"showYoung",checked:h,onChange:this._handleFieldChange,value:h}),label:"Young"}),r.a.createElement(Ze.a,{size:"small",onClick:this._handleRefresh},r.a.createElement(ua.a,null)),r.a.createElement("div",{className:t.grow}),r.a.createElement(ba,{onSearch:this._handleSearch,onClear:this._handleSearchClear})),e)}},{key:"_showList",value:function(e,t){var a=this.props.classes,n=t;return this.state.showSearch||this.state.showYoung||(n=t.filter(function(e){return e.actualAge>17})),r.a.createElement(la.a,{className:a.list,subheader:r.a.createElement(ia.a,null,"".concat(e," (").concat(n.length,")"))},n.map(function(e){return r.a.createElement(Ea,{key:e.id,user:e})}))}},{key:"_handleSearch",value:function(e){var t=this;this.setState({isFetching:!0,searchUsers:[]}),X.getUser(e).then(function(e){return[e.data]}).catch(function(){return[]}).then(function(e){t.setState({isFetching:!1,showSearch:!0,searchUsers:e})})}},{key:"_handleSearchClear",value:function(){this.setState({isFetching:!1,showSearch:!1,searchUsers:[]})}},{key:"_handleRefresh",value:function(){var e=this;this.setState({isFetching:!0,total:0,maleUsers:[],femaleUsers:[],otherUsers:[]}),X.listUsers().then(function(t){var a=[],n=[],r=[];t.data.items.forEach(function(e){e.actualAge=dt(e.birthday&&new Date(e.birthday))||99,"male"===e.gender?a.push(e):"female"===e.gender?n.push(e):r.push(e)}),e.setState({isFetching:!1,total:t.data.total,maleUsers:a,femaleUsers:n,otherUsers:r})})}},{key:"_handleFieldChange",value:function(e){var t=e.target,a=t.type,n=t.name,r=t.value,c=t.checked;this.setState(Object(R.a)({},n,"checkbox"===a?c:r))}}]),t}(r.a.Component));function Oa(){return r.a.createElement(Ae,null,r.a.createElement(va,null))}var Ca=a(349),ya=Object(De.a)(function(e){return{list:{width:900,backgroundColor:"#fff"}}});function ja(e){var t=e.users,a=e.isFetching,n=ya();return r.a.createElement(la.a,{className:n.list},a?r.a.createElement(Ue.a,null):t.map(function(e){return r.a.createElement(Ea,{key:e.id,user:e})}))}var ka=Object(De.a)(function(e){return{container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",height:"100%"},toolbar:{display:"flex",justifyContent:"space-between",alignItems:"center",width:900,"& label":{marginLeft:5,marginRight:5},"& select":{marginLeft:5}},list:{height:"calc(100% - 50px)",overflow:"auto"}}});function Sa(e){var t=e.limit,a=e.offset,n=e.filters,r=Object(j.a)({limit:t,offset:a},n);return r.active&&(r.lastActive=Date.now()-36e5*r.active,delete r.active),"null"===r.gender&&delete r.gender,r.age||delete r.age,Z.list(r).then(function(e){return{items:e.data.items,total:e.data.total}})}function wa(){var e=ka(),t=function(e){var t=e.listFn,a=e.defaultPageSize,n=void 0===a?20:a,c=e.defaultFilters,l=void 0===c?{}:c,i=r.a.useRef(!0),o=r.a.useState([]),s=Object(Dt.a)(o,2),u=s[0],m=s[1],d=r.a.useState(!1),f=Object(Dt.a)(d,2),h=f[0],p=f[1],E=r.a.useState(0),g=Object(Dt.a)(E,2),b=g[0],v=g[1],O=r.a.useState(n),C=Object(Dt.a)(O,2),y=C[0],k=C[1],S=r.a.useState(l),w=Object(Dt.a)(S,2),I=w[0],R=w[1],x=r.a.useState(0),T=Object(Dt.a)(x,2),N=T[0],_=T[1],D=r.a.useMemo(function(){return Math.ceil(N/y)},[y,N]);function F(){var e=y,a=e*b;return p(!0),t({limit:e,offset:a,filters:I}).then(function(e){_(e.total),m(e.items),p(!1)})}return r.a.useEffect(function(){i.current?i.current=!1:F()},[b,y,I]),{items:u,page:b,pageSize:y,total:N,totalPage:D,isFetching:h,filters:I,changePage:function(e){v(e)},changePageSize:function(e){k(e)},refresh:function(){F()},addFilter:function(e){R(function(t){return Object(j.a)({},t,e)})},setFilters:R}}({listFn:Sa,defaultPageSize:50,defaultFilters:{age:20,gender:"female",active:3}});return r.a.useEffect(t.refresh,[]),r.a.createElement(Ae,{className:e.container},r.a.createElement("div",{className:e.toolbar},r.a.createElement("div",null,r.a.createElement("label",null,"Min age:",r.a.createElement("select",{value:t.filters.age,onChange:function(e){return t.addFilter({age:parseInt(e.target.value)})}},r.a.createElement("option",{value:"null"},"-- Age --"),r.a.createElement("option",{value:"18"},"18"),r.a.createElement("option",{value:"19"},"19"),r.a.createElement("option",{value:"20"},"20"),r.a.createElement("option",{value:"21"},"21"),r.a.createElement("option",{value:"22"},"22"),r.a.createElement("option",{value:"23"},"23"),r.a.createElement("option",{value:"24"},"24"),r.a.createElement("option",{value:"25"},"25"),r.a.createElement("option",{value:"26"},"26"),r.a.createElement("option",{value:"27"},"27"),r.a.createElement("option",{value:"28"},"28"),r.a.createElement("option",{value:"29"},"29"))),r.a.createElement("label",null,"Active:",r.a.createElement("select",{value:t.filters.active,onChange:function(e){return t.addFilter({active:parseInt(e.target.value)})}},r.a.createElement("option",{value:"1"},"last 1 hour"),r.a.createElement("option",{value:"3"},"last 3 hours"),r.a.createElement("option",{value:"6"},"last 6 hours"),r.a.createElement("option",{value:"12"},"last 12 hours"),r.a.createElement("option",{value:"24"},"last 1 day"),r.a.createElement("option",{value:"48"},"last 2 days"),r.a.createElement("option",{value:"72"},"last 3 days"),r.a.createElement("option",{value:"96"},"last 4 days"),r.a.createElement("option",{value:"120"},"last 5 days"),r.a.createElement("option",{value:"144"},"last 6 days"),r.a.createElement("option",{value:"168"},"last 7 days"),r.a.createElement("option",{value:"192"},"last 8 days"),r.a.createElement("option",{value:"216"},"last 9 days"))),r.a.createElement("label",null,"Gender:",r.a.createElement("select",{value:t.filters.gender,onChange:function(e){return t.addFilter({gender:e.target.value})}},r.a.createElement("option",{value:"null"},"-- Gender --"),r.a.createElement("option",{value:"female"},"female"),r.a.createElement("option",{value:"male"},"male"),r.a.createElement("option",{value:"other"},"other")))),r.a.createElement("div",null,r.a.createElement("span",null,t.total," (",t.page+1," / ",t.totalPage,")"),r.a.createElement("input",{style:{marginLeft:10,width:50},onChange:function(e){return e.target.value&&t.changePage(parseInt(e.target.value)-1)}}),r.a.createElement("select",{value:t.pageSize,onChange:function(e){return t.changePageSize(parseInt(e.target.value))}},r.a.createElement("option",{value:"10"},"10"),r.a.createElement("option",{value:"20"},"20"),r.a.createElement("option",{value:"50"},"50"),r.a.createElement("option",{value:"100"},"100"),r.a.createElement("option",{value:"200"},"200"))),r.a.createElement("div",null,r.a.createElement(Ze.a,{onClick:t.refresh},r.a.createElement(ua.a,null)),r.a.createElement(Ca.a,{size:"small"},r.a.createElement(Pe.a,{disabled:0===t.page,onClick:function(){return t.changePage(t.page-1)}},"Back"),r.a.createElement(Pe.a,{disabled:t.page===t.totalPage-1,onClick:function(){return t.changePage(t.page+1)}},"Next")))),r.a.createElement("div",{className:e.list},r.a.createElement(ja,{users:t.items,isFetching:t.isFetching})))}var Ia=function(e){function t(){var e,a;Object(ze.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(Ke.a)(this,(e=Object(We.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},a.handleClickOpen=function(){a.setState({open:!0})},a.handleClose=function(){a.setState({open:!1})},a.handleSubmit=function(){a.handleClose(),a.props.handleSubmit()},a}return Object(Ve.a)(t,e),Object(Ge.a)(t,[{key:"render",value:function(){var e=this.props,t=e.anchorElement,a=e.dialogTitleText,n=e.dialogBodyText,c=e.dialogActionText;return r.a.createElement(r.a.Fragment,null,r.a.createElement(t,{onClick:this.handleClickOpen}),r.a.createElement(Ot.a,{open:this.state.open,onClose:this.handleClose,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description"},r.a.createElement(Ct.a,{id:"alert-dialog-title"},a),r.a.createElement(yt.a,null,r.a.createElement(jt.a,{id:"alert-dialog-description"},n)),r.a.createElement(It.a,null,r.a.createElement(Pe.a,{onClick:this.handleClose,color:"primary",autoFocus:!0},"Cancel"),r.a.createElement(Pe.a,{onClick:this.handleSubmit,color:"secondary"},c))))}}]),t}(r.a.Component),Ra=Object(Re.a)(function(e){return{}})(Ia);var xa=Object(i.b)(function(e){return{}},function(e){return{onUnblockSuccess:function(){e(v("M\u1edf kh\xf3a th\xe0nh c\xf4ng"))},onUnblockFailure:function(){e(v("C\xf3 l\u1ed7i x\u1ea3y ra!"))}}})(function(e){var t=e.code,a=e.disabled,n=e.onUnblockSuccess,c=e.onUnblockFailure;return r.a.createElement(Ra,{anchorElement:function(e){var t=e.onClick;return r.a.createElement(Pe.a,{variant:"outlined",color:"primary",onClick:t,disabled:a},"M\u1edf kh\xf3a")},dialogTitleText:"M\u1edf kh\xf3a t\xe0i kho\u1ea3n",dialogBodyText:"B\u1ea1n c\xf3 ch\u1eafc ch\u1eafn mu\u1ed1n m\u1edf kh\xf3a t\xe0i kho\u1ea3n n\xe0y?",dialogActionText:"M\u1edf kh\xf3a",handleSubmit:function(){Q.unblockUser(t.toLowerCase()).then(n).catch(c)}})}),Ta=Object(De.a)(function(e){return{container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},content:Object(j.a)({},e.mixins.gutters(),{marginTop:e.spacing(2),paddingTop:e.spacing(2),paddingBottom:e.spacing(2),width:"100%",maxWidth:800})}});var Na=function(){var e,t=Ta(),a=r.a.useState(),n=Object(Dt.a)(a,2),c=n[0],l=n[1],i=r.a.useState(),o=Object(Dt.a)(i,2),s=o[0],u=o[1],m=r.a.useState(!1),d=Object(Dt.a)(m,2),f=d[0],h=d[1];return r.a.useEffect(function(){c?(h(!0),u(null),Q.getUserProfile(c.toLowerCase()).then(function(e){u(e.data),h(!1)}).catch(function(){h(!1)})):u(null)},[c]),e=f?r.a.createElement(Ue.a,null):s?r.a.createElement("div",null,r.a.createElement(Me.a,null,"H\xe0nh \u0111\u1ed9ng:"),r.a.createElement(xa,{code:c,disabled:!s.messages.total}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Me.a,null,"Tin nh\u1eafn g\u1ea7n \u0111\xe2y (",s.messages.total,"):"),r.a.createElement("ul",null,s.messages.items.map(function(e){return r.a.createElement("li",null,e.content)}))):r.a.createElement(Me.a,null,"Kh\xf4ng t\xecm th\u1ea5y user"),r.a.createElement("div",{className:t.container},r.a.createElement(ba,{placeholder:"Nh\u1eadp code...",onSearch:function(e){return l(e)},onClear:function(){return l()}}),r.a.createElement(Xt.a,{className:t.content},e))};var _a=function(){return r.a.createElement(Ae,null,r.a.createElement(Na,null))},Da=a(350),Fa=a(166),Aa=a.n(Fa),Pa=Object(De.a)(function(e){return{container:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},inline:{display:"inline"},avatar:{marginRight:10,width:64,height:64}}});function Ua(e){var t=e.user,a=e.onRemove,n=Pa(),c="https://graph.facebook.com/".concat(t.accounts[0].id,"/picture"),l=t.accounts[0].data&&t.accounts[0].data.age_range||{min:0,max:0},i=dt(t.birthday&&new Date(t.birthday)),o=r.a.useState(),s=Object(Dt.a)(o,2),u=s[0],m=s[1];return r.a.createElement(ma.a,{alignItems:"flex-start",divider:!0},u&&r.a.createElement("img",{src:c+"?height=640",alt:"".concat(t.name,"'s avatar"),onClick:function(){return m(!1)}}),r.a.createElement(fa.a,{onClick:function(){return m(!0)}},r.a.createElement(ha.a,{alt:"".concat(t.name,"'s avatar"),src:c+"?height=100",className:n.avatar})),r.a.createElement(da.a,{primary:t.name,secondary:r.a.createElement(r.a.Fragment,null,r.a.createElement(Me.a,{component:"span",variant:"body2",className:n.inline,color:"textPrimary"},t.id),r.a.createElement("span",null," \u2014 ","min: ",l.min," - max: ",l.max," - actual: ",i))}),r.a.createElement(Da.a,null,r.a.createElement(Ze.a,{onClick:function(){return a(t)}},r.a.createElement(Aa.a,null))))}var Ma=function(){},Ba={debug:Ma,info:Ma,warn:console.warn.bind(console,"%c[WARN]","color: #ff8000; font-weight: bold"),error:console.log.bind(console,"%c[ERROR]","color: #ff0000; font-weight: bold")};var La=Object(De.a)(function(e){return{container:{display:"flex",flexDirection:"column",alignItems:"center"},form:{width:700,marginBottom:e.spacing(2),display:"flex",justifyContent:"space-between"},textField:{width:300},list:{width:800,backgroundColor:e.palette.background.paper}}});var Ha=function(){var e=La(),t=At(),a=t.values,n=t.handleChange,c=r.a.useState([]),l=Object(Dt.a)(c,2),i=l[0],o=l[1],s=r.a.useState(!1),u=Object(Dt.a)(s,2),m=u[0],d=u[1];function f(){d(!0),X.listMappings().then(function(e){var t=e.data;return Promise.all(Object.keys(t).map(function(e){return a=e,n=t[e],X.getUser(a).then(function(e){return e.data}).then(function(e){return e.name=e.name+" - ".concat(n),e}).catch(function(e){return Ba.error("Error while getting user:",a,e),null});var a,n}))}).then(function(e){o(e.filter(Boolean)),d(!1)}).catch(function(e){Ba.error("Cannot fetch user",e)})}function h(e){d(!0),X.removeMapping(e.id).then(f)}return r.a.useEffect(f,[]),r.a.createElement(Ae,{className:e.container},r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault(),d(!0),X.addMapping({waiter:a.waiter,target:a.target}).then(f)}},r.a.createElement(kt.a,{className:e.textField,name:"waiter",placeholder:"Waiter",onChange:n,required:!0}),r.a.createElement(kt.a,{className:e.textField,name:"target",placeholder:"Target",onChange:n,required:!0}),r.a.createElement(Pe.a,{type:"submit"},"Add")),m?r.a.createElement(Ue.a,null):r.a.createElement("div",null,r.a.createElement(la.a,{className:e.list,subheader:r.a.createElement(ia.a,null,"Users (".concat(i.length,")"))},i.map(function(e){return r.a.createElement(Ua,{key:e.id,user:e,onRemove:h})}))))},za=a(32),Ga=a.n(za),Ka=a(64),Wa=Object(De.a)(function(e){return{container:{display:"flex",flexDirection:"column",alignItems:"center"},form:{width:600,marginBottom:e.spacing(2),display:"flex",justifyContent:"space-between",flexDirection:"column"},textField:{width:300},message:{width:600,padding:e.spacing(3)},user:{marginTop:e.spacing(2),width:600},buttons:{display:"flex",marginTop:e.spacing(2),gap:"20px"}}});var Va=function(){var e=Wa(),t=At({forceClose:!1}),a=t.values,c=t.handleChange,l=r.a.useState(!1),i=Object(Dt.a)(l,2),o=i[0],s=i[1],u=r.a.useState(),m=Object(Dt.a)(u,2),d=m[0],f=m[1],h=r.a.useState(null),p=Object(Dt.a)(h,2),E=p[0],g=p[1];function b(){return(b=Object(Ka.a)(Ga.a.mark(function e(){var t;return Ga.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),f(""),e.prev=2,e.next=5,X.blockUser(a.userId);case 5:t=e.sent,f(JSON.stringify(t)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),f("ERROR: ".concat(e.t0.message));case 12:return e.prev=12,s(!1),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[2,9,12,15]])}))).apply(this,arguments)}function v(){return(v=Object(Ka.a)(Ga.a.mark(function e(){var t;return Ga.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),f(""),e.prev=2,e.next=5,X.forceUserCloseChat(a.userId);case 5:t=e.sent,f(JSON.stringify(t)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),f("ERROR: ".concat(e.t0.message));case 12:return e.prev=12,s(!1),e.finish(12);case 15:case"end":return e.stop()}},e,null,[[2,9,12,15]])}))).apply(this,arguments)}function O(){return(O=Object(Ka.a)(Ga.a.mark(function e(){var t,n;return Ga.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),f(""),e.prev=2,t=Date.now()+2592e6,e.next=6,X.markUserAsSpammer(a.userId,t);case 6:n=e.sent,f(JSON.stringify(n)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),f("ERROR: ".concat(e.t0.message));case 13:return e.prev=13,s(!1),e.finish(13);case 16:case"end":return e.stop()}},e,null,[[2,10,13,16]])}))).apply(this,arguments)}function C(){return(C=Object(Ka.a)(Ga.a.mark(function e(){var t;return Ga.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),f(""),g(null),e.prev=3,e.next=6,X.getUser(a.userId);case 6:t=e.sent,g(t.data),f(JSON.stringify(t)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3),f("ERROR: ".concat(e.t0.message));case 14:return e.prev=14,s(!1),e.finish(14);case 17:case"end":return e.stop()}},e,null,[[3,11,14,17]])}))).apply(this,arguments)}return Object(n.useEffect)(function(){g(null)},[a.userId]),r.a.createElement(Ae,{className:e.container},r.a.createElement("form",{className:e.form},r.a.createElement(kt.a,{className:e.textField,name:"userId",placeholder:"User ID",onChange:c,required:!0,autoFocus:!0}),r.a.createElement("div",{className:e.buttons},r.a.createElement(Pe.a,{onClick:function(){return C.apply(this,arguments)}},"Get Info"),r.a.createElement(Pe.a,{color:"secondary",onClick:function(){return b.apply(this,arguments)}},"Disable"),r.a.createElement(Pe.a,{onClick:function(){return v.apply(this,arguments)}},"Force Close"),r.a.createElement(Pe.a,{onClick:function(){return O.apply(this,arguments)}},"Mark as Spammer"))),r.a.createElement(Xt.a,{className:e.message},o?r.a.createElement(Ue.a,null):r.a.createElement(Me.a,{variant:"caption"},d)),E?r.a.createElement("div",{className:e.user},r.a.createElement(Ea,{user:E})):null)},qa=a(168),Ja=a.n(qa),Ya=a(105),Xa=(a(147),a(57)),Qa=a.n(Xa);function Za(e){return Qa.a.map(e,function(e,t){return"".concat(t,":").concat(e)}).join(";")}function $a(e,t,a){if("string"===typeof a){var n=a;a=function(e,t){return e[n]===t[n]}}else if(Array.isArray(a))a=function(e,t){return a.every(function(a){return e[a]===t[a]})};else if("object"===typeof a){var r=a;a=function(e){return Object.keys(r).every(function(t){return e[t]===r[t]})}}else"function"!==typeof a&&(a=function(e,t){return e===t});var c=e.findIndex(function(e){return a(e,t)});return c>-1&&(t?e.splice(c,1,t):e.splice(c,1)),e}var en=a(131),tn=a.n(en);function an(e){var t=e.time,a=e.format,n=void 0===a?"DD/MM/YYYY HH:mm":a,c=r.a.useMemo(function(){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"DD/MM/YYYY HH:mm";return tn()(e).format(t)}(t,n)},[t,n]);return r.a.createElement(r.a.Fragment,null,c)}function nn(e){return null===e||void 0===e}function rn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return e.splice(a,0,t),e}var cn={},ln=50,on=6e4,sn=18e5,un={pageIndex:0,pageSize:0,filters:{},sorting:{},items:[],total:0,error:null,isFetching:!1},mn={};function dn(e){var t=e.listId,a=e.defaultPageSize,n=e.defaultFilters,r=e.defaultSorting,c=Object(j.a)({},un,{listId:t,pageSize:a,filters:n,sorting:r});return t?(mn[t]||(mn[t]=c),mn[t]):c}var fn={SET_PAGE_INDEX:1,SET_PAGE_SIZE:2,SET_FILTERS:3,SET_SORTING:4,FETCH_REQUEST:5,FETCH_SUCCESS:6,FETCH_ERROR:7,ADD_ITEM:8,REMOVE_ITEMS:9,REPLACE_ITEMS:10,REFRESH:11,CLEAR_ITEMS:12,ADD_FILTER:13};function hn(e,t){var a;switch(t.type){case fn.SET_PAGE_INDEX:a=Object(j.a)({},e,{pageIndex:t.pageIndex});break;case fn.SET_PAGE_SIZE:a=Object(j.a)({},e,{pageSize:t.pageSize});break;case fn.SET_FILTERS:a=Object(j.a)({},e,{filters:t.filters,pageIndex:0});break;case fn.ADD_FILTER:var n=t.id,r=t.value,c=Object(j.a)({},e.filters);nn(r)?delete c[n]:c[n]=r,a=Object(j.a)({},e,{filters:c,pageIndex:0});break;case fn.SET_SORTING:a=Object(j.a)({},e,{sorting:t.sorting,pageIndex:0});break;case fn.FETCH_REQUEST:a=Object(j.a)({},e,{isFetching:!0,error:null});break;case fn.FETCH_SUCCESS:a=Object(j.a)({},e,{isFetching:!1,total:t.total,items:t.items});break;case fn.FETCH_ERROR:a=Object(j.a)({},e,{isFetching:!1,total:0,items:[],error:t.error});break;case fn.ADD_ITEM:a=Object(j.a)({},e,{items:rn(e.items.slice(),t.item,t.position),total:e.total+1});break;case fn.REMOVE_ITEMS:a=Object(j.a)({},e,{items:t.items.reduce(function(e,a){return $a(e,null,Object(R.a)({},t.idField,a[t.idField]))},e.items.slice()),total:e.total-1});break;case fn.REPLACE_ITEMS:a=Object(j.a)({},e,{items:t.items.reduce(function(e,a){return $a(e,a,t.idField)},e.items.slice())});break;case fn.REFRESH:a=Object(j.a)({},e,{filters:Object(j.a)({},e.filters)});break;case fn.CLEAR_ITEMS:a=Object(j.a)({},e,{items:[],total:0});break;default:throw new Error("Invalid action.type: "+t.type)}return e.listId&&(mn[e.listId]=a),a}function pn(e){var t=e.listFn,a=e.listId,r=e.defaultPageSize,c=void 0===r?ln:r,l=e.defaultFilters,i=void 0===l?cn:l,o=e.defaultSorting,s=void 0===o?cn:o,u=e.clearOnUnmount,m=void 0===u||u,d=e.refreshOnInactive,f=void 0===d||d,h=Object(n.useRef)(!0),p=Object(n.useRef)(0),E=Object(n.useReducer)(hn,{listId:a,defaultPageSize:c,defaultFilters:i,defaultSorting:s},dn),g=Object(Dt.a)(E,2),b=g[0],v=g[1],O=b.pageIndex,C=b.pageSize,y=b.filters,k=b.sorting,S=b.total,w=b.items,I=b.isFetching,R=b.error,x=Object(n.useMemo)(function(){return Math.ceil(S/C)},[S,C]),T=Object(n.useMemo)(function(){return Object.keys(y).map(function(e){return{id:e,value:y[e]}})},[y]),N=Object(n.useMemo)(function(){return Object.keys(k).map(function(e){return{id:e,desc:"DESC"===k[e]}})},[k]),_=Object(n.useCallback)(function(){v({type:fn.REFRESH})},[]),D=Object(n.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];v({type:fn.SET_PAGE_INDEX,pageIndex:e}),t&&_()},[_]),F=Object(n.useCallback)(function(e,t){v({type:fn.SET_PAGE_INDEX,pageIndex:t}),v({type:fn.SET_PAGE_SIZE,pageSize:e})},[]),A=Object(n.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};e.forEach(function(e){nn(e.value)||(t[e.id]=e.value)}),v({type:fn.SET_FILTERS,filters:t})},[]),P=Object(n.useCallback)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={};e.forEach(function(e){t[e.id]=e.desc?"DESC":"ASC"}),v({type:fn.SET_SORTING,sorting:t})},[]),U=Object(n.useCallback)(function(e,t){v({type:fn.ADD_FILTER,id:e,value:t})},[]),M=Object(n.useCallback)(function(e){v({type:fn.SET_FILTERS,filters:e})},[]),B=Object(n.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";v({type:fn.REPLACE_ITEMS,items:[e],idField:t})},[]),L=Object(n.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";v({type:fn.REPLACE_ITEMS,items:e,idField:t})},[]),H=Object(n.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";v({type:fn.REMOVE_ITEMS,items:[e],idField:t})},[]),z=Object(n.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";v({type:fn.REMOVE_ITEMS,items:e,idField:t})},[]),G=Object(n.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;v({type:fn.ADD_ITEM,item:e,position:t})},[]),K={loading:I,error:R,data:w,total:S,page:O,pageSize:C,filters:y,sorting:k,pages:x,filtered:T,sorted:N};return Object(n.useEffect)(function(){h.current?h.current=!1:(p.current=Date.now(),v({type:fn.FETCH_REQUEST}),t(Object(j.a)({},K,{limit:C,offset:O*C})).then(function(e){v(Object(j.a)({type:fn.FETCH_SUCCESS},e.data))}).catch(function(e){Ba.error("Error while fetching list",e),v({type:fn.FETCH_ERROR,error:e})}))},[O,C,y,k,p]),Object(n.useEffect)(function(){if(f){var e=setInterval(function(){p.current&&Date.now()-p.current>sn&&(Ba.debug("Refreshing the list after being inactive for",sn/1e3,"seconds"),_())},on);return function(){return clearInterval(e)}}},[p,_,f]),Object(n.useEffect)(function(){return function(){m&&v({type:fn.CLEAR_ITEMS})}},[m]),Object(j.a)({},K,{refresh:_,onPageChange:D,onPageSizeChange:F,onFilteredChange:A,onSortedChange:P,addFilter:U,setFilters:M,replaceItem:B,replaceItems:L,removeItem:H,removeItems:z,addItem:G})}var En=Object(De.a)({container:{display:"flex","& *:not(:last-child)":{marginRight:5}}});function gn(e){var t=e.children,a=En();return r.a.createElement("div",{className:a.container},t)}var bn=Object(De.a)({container:{cursor:"pointer"}});function vn(e){var t=e.children,a=e.onClick,n=Object(k.a)(e,["children","onClick"]),c=bn();return r.a.createElement("div",Object.assign({className:c.container,onClick:a},n),t)}var On=Object(De.a)({container:{marginLeft:"auto"}});function Cn(){var e=On();return r.a.createElement("div",{className:e.container})}function yn(e){var t=e.value,a=e.onChange,n=e.options,c=void 0===n?{}:n;return r.a.createElement("select",{onChange:function(e){a(e.target.value)},style:{width:"100%",textAlignLast:"center"},value:t},r.a.createElement("option",{value:""},"All"),Object.keys(c).map(function(e){return r.a.createElement("option",{key:e,value:e},c[e])}))}var jn=Object(De.a)({container:{display:"flex",marginBottom:10,alignItems:"center","& *:not(:last-child)":{marginRight:5}}});function kn(e){var t=e.children,a=jn();return r.a.createElement("div",{className:a.container},t)}var Sn=Qa.a.memoize(function(e){return X.getUser(e).then(function(e){return e.data})});function wn(e){var t=e.id,a=Object(n.useState)("..."),c=Object(Dt.a)(a,2),l=c[0],i=c[1];return Object(n.useEffect)(function(){i("..."),Sn(t).then(function(e){i(e.name)})},[t]),r.a.createElement("span",null,l)}var In=a(178);function Rn(e){var t=e.disabled,a=e.onAction,c=Object(n.useState)(null),l=Object(Dt.a)(c,2),i=l[0],o=l[1],s=function(){o(null)};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pe.a,{"aria-controls":"simple-menu","aria-haspopup":"true",disabled:t,onClick:function(e){o(e.currentTarget)}},"Bulk Action"),r.a.createElement(In.a,{anchorEl:i,keepMounted:!0,open:Boolean(i),onClose:s},r.a.createElement(Le.a,{onClick:function(){return u(parseInt(D.BLOCKED_USER))}},"Kh\xf3a user"),r.a.createElement(Le.a,{onClick:function(){return u(parseInt(D.DISABLE_USER))},style:{color:"red"}},"Disable user"),r.a.createElement(Le.a,{onClick:function(){return u(parseInt(D.MARK_USER_AS_SPAMMER))}},"Mark user as spammer"),r.a.createElement(Le.a,{onClick:function(){return u(parseInt(D.BLOCKED_REPORTER))}},"Kh\xf3a reporter"),r.a.createElement(Le.a,{onClick:function(){return u(parseInt(D.DISABLE_REPORTER))},style:{color:"red"}},"Disable reporter"),r.a.createElement(Le.a,{onClick:function(){return u(parseInt(D.INVALID))}},"Report l\xe1o"),r.a.createElement(Le.a,{onClick:function(){return u(parseInt(D.IGNORE))}},"B\u1ecf qua")));function u(e){s(),a(e)}}var xn=a(351),Tn=a(108),Nn=a(109),_n=a(111),Dn=a.n(_n),Fn=a(167),An=a.n(Fn),Pn=a(132),Un=a.n(Pn);function Mn(e){var t=e.disabled,a=e.onAction,n=Ft(),c=n.open,l=n.handleClose,i=n.handleOpen;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pe.a,{variant:"contained",color:"primary",size:"small",disabled:t,onClick:i},r.a.createElement(An.a,null),"X\u1eed l\xfd"),r.a.createElement(Ot.a,{onClose:l,"aria-labelledby":"simple-dialog-title",open:c},r.a.createElement(Ct.a,{id:"simple-dialog-title"},"Ch\u1ecdn h\u01b0\u1edbng x\u1eed l\xfd:"),r.a.createElement(la.a,null,r.a.createElement(ma.a,{button:!0,onClick:function(){return o(parseInt(D.BLOCKED_USER))}},r.a.createElement(xn.a,null,r.a.createElement(Dn.a,{style:{color:Tn.a[500]}})),r.a.createElement(da.a,{primary:"Kh\xf3a user"})),r.a.createElement(ma.a,{button:!0,onClick:function(){return o(parseInt(D.DISABLE_USER))}},r.a.createElement(xn.a,null,r.a.createElement(Dn.a,{style:{color:Tn.a[500]}})),r.a.createElement(da.a,{primary:"Disable user",style:{color:"red"}})),r.a.createElement(ma.a,{button:!0,onClick:function(){return o(parseInt(D.MARK_USER_AS_SPAMMER))}},r.a.createElement(xn.a,null,r.a.createElement(Dn.a,{style:{color:Tn.a[500]}})),r.a.createElement(da.a,{primary:"Mark user as spammer"})),r.a.createElement(ma.a,{button:!0,onClick:function(){return o(parseInt(D.BLOCKED_REPORTER))}},r.a.createElement(xn.a,null,r.a.createElement(Un.a,{style:{color:Nn.a[500]}})),r.a.createElement(da.a,{primary:"Kh\xf3a reporter"})),r.a.createElement(ma.a,{button:!0,onClick:function(){return o(parseInt(D.DISABLE_REPORTER))}},r.a.createElement(xn.a,null,r.a.createElement(Un.a,{style:{color:Nn.a[500]}})),r.a.createElement(da.a,{primary:"Disable reporter",style:{color:"red"}})),r.a.createElement(ma.a,{button:!0,onClick:function(){return o(parseInt(D.INVALID))}},r.a.createElement(xn.a,null,r.a.createElement(et.a,{color:"action"})),r.a.createElement(da.a,{primary:"Report l\xe1o"})))));function o(e){l(),a(e)}}function Bn(e){var t=e.limit,a=e.offset,n=e.filters,r=e.sorting,c=Object(j.a)({},n);return c.recentDay&&(c.updatedAt=new Date(Date.now()-864e5*c.recentDay),delete c.recentDay),$.list(Object(j.a)({limit:t,offset:a,sortBy:Za(r)},c))}function Ln(){var e,t=Pt().notify,a=Object(n.useState)({}),c=Object(Dt.a)(a,2),l=c[0],i=c[1],o=Object(n.useState)(!1),s=Object(Dt.a)(o,2),u=s[0],m=s[1],d={status:String(D.PENDING),recentDay:3},f=pn({listFn:Bn,defaultPageSize:20,defaultSorting:{toCount:"DESC",toUserId:"ASC"},defaultFilters:d}),h=f.data,p=f.page,E=f.pageSize,g=f.pages,b=f.loading,v=f.filtered,O=f.sorted,C=f.filters,y=f.onPageChange,k=f.onPageSizeChange,S=f.onFilteredChange,w=f.onSortedChange,I=f.refresh,x=f.addFilter,T=f.setFilters,N=f.removeItem,_=f.removeItems,A=[{Header:"Reporter",accessor:"fromUserId",width:150,filterable:!0,Cell:function(e){var t=e.original;return r.a.createElement(vn,{onClick:function(){return x("fromUserId",t.fromUserId)}},r.a.createElement(wn,{id:t.fromUserId})," (",t.fromCount,")")}},{Header:"User",accessor:"toUserId",width:150,filterable:!0,Cell:function(e){var t=e.original;return r.a.createElement(vn,{onClick:function(){return x("toUserId",t.toUserId)}},r.a.createElement(wn,{id:t.toUserId})," (",t.toCount,")")}},{Header:"Last updated",id:"updatedAt",sortable:!0,accessor:"updatedAt",width:150,Cell:function(e){var t=e.original;return r.a.createElement(an,{time:t.updatedAt})}},{Header:"L\xfd do",accessor:"reason",width:200},{Header:"Tin nh\u1eafn cu\u1ed1i",accessor:"message"},{Header:"Tr\u1ea1ng th\xe1i",accessor:"status",width:120,style:{textAlign:"center"},filterable:!0,Filter:(e=F,function(t){var a=t.filter,n=t.onChange;return r.a.createElement(yn,{value:a?a.value:"",onChange:n,options:e})}),Cell:function(e){var t=e.original;return F[t.status]}},{Header:"Action",width:220,Cell:function(e){var t=e.original;return r.a.createElement(gn,null,r.a.createElement(Pe.a,{variant:"outlined",size:"small",disabled:t.status!==D.PENDING,onClick:function(){return N(e=t),void $.update(e.id,{status:D.IGNORE});var e}},r.a.createElement(Ja.a,null),"B\u1ecf qua"),r.a.createElement(Mn,{disabled:t.status!==D.PENDING,onAction:function(e){return function(e,t){e===D.BLOCKED_REPORTER||e===D.DISABLE_REPORTER?_(h.filter(function(e){return e.fromUserId===t.fromUserId})):e===D.BLOCKED_USER||e===D.DISABLE_USER||e===D.MARK_USER_AS_SPAMMER?_(h.filter(function(e){return e.toUserId===t.toUserId})):N(t);$.update(t.id,{status:e})}(e,t)}}))}},{Header:function(){return r.a.createElement("label",null,r.a.createElement("input",{type:"checkbox",checked:u,onChange:U,style:{transform:"scale(1.5)"}}))},width:100,Cell:function(e){var t=e.original;return r.a.createElement("label",{style:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",cursor:"pointer"}},r.a.createElement("input",{type:"checkbox",name:t.id,checked:Boolean(l[t.id]),onChange:P,style:{transform:"scale(1.5)"}}))}}];return Object(n.useEffect)(I,[]),Object(n.useEffect)(function(){i({}),m(!1)},[h]),r.a.createElement(Ae,null,r.a.createElement(kn,null,r.a.createElement(Pe.a,{onClick:I},"T\u1ea3i l\u1ea1i"),r.a.createElement(Pe.a,{onClick:function(){return T(d)}},"X\xf3a b\u1ed9 l\u1ecdc"),r.a.createElement("label",null,"Updated At:"," ",r.a.createElement("select",{value:C.recentDay,onChange:function(e){return x("recentDay",parseInt(e.target.value))}},r.a.createElement("option",{value:"null"},"-- Updated At --"),r.a.createElement("option",{value:"1"},"1 day"),r.a.createElement("option",{value:"2"},"2 days"),r.a.createElement("option",{value:"3"},"3 days"),r.a.createElement("option",{value:"7"},"1 week"),r.a.createElement("option",{value:"14"},"2 weeks"),r.a.createElement("option",{value:"21"},"3 weeks"),r.a.createElement("option",{value:"30"},"1 month"))),r.a.createElement(Cn,null),r.a.createElement(Pe.a,{onClick:function(){return B.apply(this,arguments)}},"Ignore All"),r.a.createElement(Rn,{disabled:0===Object.values(l).filter(Boolean).length,onAction:function(e){return M.apply(this,arguments)}})),r.a.createElement(Ya.a,{manual:!0,columns:A,data:h,page:p,pageSize:E,pages:g,loading:b,filtered:v,sorted:O,onPageChange:y,onPageSizeChange:k,onFilteredChange:S,onSortedChange:w,style:{height:"calc(100% - 46px)"},className:"-striped -highlight"}));function P(e){var t=e.target,a=t.name,n=t.checked,r=Object(j.a)({},l,Object(R.a)({},a,n));i(r),m(!!n&&h.every(function(e){return r[e.id]}))}function U(e){var t=e.target.checked,a={};t?h.forEach(function(e){a[e.id]=!0}):Object.keys(l).forEach(function(e){a[e]=!1}),i(a),m(t)}function M(){return(M=Object(Ka.a)(Ga.a.mark(function e(a){var n,r,c,i;return Ga.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t("Processing..."),n=u,r=[],h.forEach(function(e){l[e.id]&&r.push(e)}),e.prev=4,e.next=7,$.updateMany(r.map(function(e){return e.id}),a);case 7:a===D.BLOCKED_REPORTER||a===D.DISABLE_REPORTER?(c=r.map(function(e){return e.fromUserId}),_(h.filter(function(e){return c.includes(e.fromUserId)}))):a===D.BLOCKED_USER||a===D.DISABLE_USER?(i=r.map(function(e){return e.toUserId}),_(h.filter(function(e){return i.includes(e.toUserId)}))):_(r),n&&I(),t("Done"),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(4),Ba.error("Error while update many reports",e.t0),t("Error!");case 16:case"end":return e.stop()}},e,null,[[4,12]])}))).apply(this,arguments)}function B(){return(B=Object(Ka.a)(Ga.a.mark(function e(){return Ga.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t("Ignoring all..."),e.prev=1,e.next=4,$.updateMany(h.map(function(e){return e.id}),D.IGNORE);case 4:I(),t("Done"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),Ba.error("Error while ignore all reports",e.t0),t("Error!");case 12:case"end":return e.stop()}},e,null,[[1,8]])}))).apply(this,arguments)}}var Hn=a(110);function zn(){return _t.getPageFeed()}function Gn(e){var t=e.original;return Object(n.useMemo)(function(){for(var e=/#CVNL(\d+)/g,a=e.exec(t.message),n=[];a;)n.push(a[1]),a=e.exec(t.message);return n.length?n.join(", "):"#"},[t.message])}function Kn(e){return e.published?r.a.createElement("span",{style:{color:Hn.a[600]}},"\u0110\xe3 \u0111\u0103ng"):r.a.createElement("span",{style:{color:Nn.a[500]}},"H\u1eb9n gi\u1edd")}function Wn(){var e=pn({listFn:zn,defaultPageSize:20}),t=e.data,a=e.loading,c=e.refresh,l=[{Header:"\u0110\u0103ng l\xfac",width:150,Cell:function(e){var t=e.original;return r.a.createElement(an,{time:t.created_time})}},{Header:"Confession",width:100,Cell:function(e){var t=e.original;return r.a.createElement(Gn,{original:t})}},{Header:"B\xe0i \u0111\u0103ng",Cell:function(e){return(e.original.message||"").substring(0,160)+"..."}},{Header:"Tr\u1ea1ng th\xe1i",width:100,Cell:function(e){var t=e.original;return r.a.createElement(Kn,{published:t.is_published})}},{width:120,Cell:function(e){var t=e.original;return r.a.createElement("a",{href:t.permalink_url,target:"_blank",rel:"noopener noreferrer"},"Xem tr\xean page")}}];return Object(n.useEffect)(c,[]),r.a.createElement(Ae,null,r.a.createElement(kn,null,r.a.createElement(Pe.a,{onClick:c},"T\u1ea3i l\u1ea1i")),r.a.createElement(Ya.a,{manual:!0,filterable:!1,sortable:!1,columns:l,data:t,loading:a,showPagination:!1,style:{height:"calc(100% - 46px)"},className:"-striped -highlight"}))}var Vn=Object(De.a)(function(e){return{container:{display:"flex",flexDirection:"column",alignItems:"center"},form:{width:600,marginBottom:e.spacing(2),display:"flex",flexDirection:"column",justifyContent:"space-between"},textField:{marginBottom:20},message:{width:600,padding:e.spacing(3)}}});function qn(){var e=Vn(),t=At({userId:"",title:"",message:"",okText:"",okUrl:"",cancelText:"",cancelUrl:""}),a=t.values,n=t.handleChange,c=r.a.useState(!1),l=Object(Dt.a)(c,2),i=l[0],o=l[1],s=r.a.useState(),u=Object(Dt.a)(s,2),m=u[0],d=u[1];return r.a.createElement(Ae,{className:e.container},r.a.createElement("form",{className:e.form,onSubmit:function(e){e.preventDefault(),o(!0),d(""),X.addWarning(a.userId,{title:a.title,message:a.message,okText:a.okText,okUrl:a.okUrl,cancelText:a.cancelText,cancelUrl:a.cancelUrl}).then(function(e){d(JSON.stringify(e.data)),o(!1)}).catch(function(){d("ERROR!"),o(!1)})}},r.a.createElement(kt.a,{className:e.textField,name:"userId",label:"User ID",onChange:n,required:!0,autoFocus:!0}),r.a.createElement(kt.a,{className:e.textField,name:"title",label:"Title",onChange:n,required:!0}),r.a.createElement(kt.a,{className:e.textField,name:"message",label:"Message",onChange:n,required:!0,multiline:!0}),r.a.createElement(kt.a,{className:e.textField,name:"okText",label:"okText",onChange:n}),r.a.createElement(kt.a,{className:e.textField,name:"okUrl",label:"okUrl",onChange:n}),r.a.createElement(kt.a,{className:e.textField,name:"cancelText",label:"cancelText",onChange:n}),r.a.createElement(kt.a,{className:e.textField,name:"cancelUrl",label:"cancelUrl",onChange:n}),r.a.createElement(Pe.a,{type:"submit"},"Send")),r.a.createElement(Xt.a,{className:e.message},i?r.a.createElement(Ue.a,null):r.a.createElement(Me.a,{variant:"caption"},m)))}function Jn(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Te,{exact:!0,path:"/",component:Yt}),r.a.createElement(Te,{exact:!0,path:"/page-posts",authzCheck:[_.MODERATOR],component:Wn}),r.a.createElement(Te,{exact:!0,path:"/online-users",authzCheck:[_.ADMIN],component:Oa}),r.a.createElement(Te,{exact:!0,path:"/active-users",authzCheck:[_.ADMIN],component:wa}),r.a.createElement(Te,{exact:!0,path:"/user-reports",authzCheck:[_.ADMIN],component:Ln}),r.a.createElement(Te,{exact:!0,path:"/mappings",authzCheck:[_.ADMIN],component:Ha}),r.a.createElement(Te,{exact:!0,path:"/block-user",authzCheck:[_.ADMIN],component:Va}),r.a.createElement(Te,{exact:!0,path:"/add-warning",authzCheck:[_.ADMIN],component:qn}),r.a.createElement(Te,{exact:!0,path:"/moderate",authzCheck:[_.MODERATOR],component:_a}),r.a.createElement(Te,{exact:!0,path:"/forbidden",authzCheck:!1,component:ca}),r.a.createElement(Ie.c,{exact:!0,path:"/login",component:aa}))}var Yn=a(352),Xn=a(353),Qn=a(364),Zn=a(169),$n=a.n(Zn),er=a(170),tr=a.n(er),ar=a(171),nr=a.n(ar),rr=a(82),cr=a.n(rr),lr=a(173),ir=a.n(lr),or=a(172),sr=a.n(or);function ur(e){var t=e.children,a=e.to,n=Object(k.a)(e,["children","to"]);return r.a.createElement(ma.a,Object.assign({button:!0,to:a,component:we.b},n),t)}var mr=Object(Re.a)(function(e){return{drawer:{width:240,flexShrink:0},drawerPaper:{width:240},drawerHeader:Object(j.a)({display:"flex",alignItems:"center",padding:"0 8px"},e.mixins.toolbar,{justifyContent:"flex-end"})}})(function(e){var t=e.classes,a=e.open,n=e.isAdmin,c=e.isModerator,l=e.closeSidebar,i=Object(Yn.a)(A.MD);return r.a.createElement(Qn.a,{className:t.drawer,variant:"persistent",anchor:"left",open:a,classes:{paper:t.drawerPaper}},r.a.createElement("div",{className:t.drawerHeader},r.a.createElement(Ze.a,{onClick:l},r.a.createElement($n.a,null))),r.a.createElement(Xn.a,null),r.a.createElement(la.a,null,c&&r.a.createElement(ur,{to:"/",onClick:o},r.a.createElement(xn.a,null,r.a.createElement(tr.a,null)),r.a.createElement(da.a,{primary:"Confessions"})),c&&r.a.createElement(ur,{to:"/page-posts",onClick:o},r.a.createElement(xn.a,null,r.a.createElement(nr.a,null)),r.a.createElement(da.a,{primary:"Posts"})),c&&r.a.createElement(ur,{to:"/moderate",onClick:o},r.a.createElement(xn.a,null,r.a.createElement(sr.a,null)),r.a.createElement(da.a,{primary:"Moderate"})),n&&r.a.createElement(ur,{to:"/user-reports",onClick:o},r.a.createElement(xn.a,null,r.a.createElement(ir.a,null)),r.a.createElement(da.a,{primary:"User Reports"})),n&&r.a.createElement(ur,{to:"/online-users",onClick:o},r.a.createElement(xn.a,null,r.a.createElement(cr.a,null)),r.a.createElement(da.a,{primary:"Online Users"})),n&&r.a.createElement(ur,{to:"/active-users",onClick:o},r.a.createElement(xn.a,null,r.a.createElement(cr.a,null)),r.a.createElement(da.a,{primary:"Active Users"})),n&&r.a.createElement(ur,{to:"/mappings",onClick:o},r.a.createElement(xn.a,null,r.a.createElement(cr.a,null)),r.a.createElement(da.a,{primary:"Mappings"})),n&&r.a.createElement(ur,{to:"/block-user",onClick:o},r.a.createElement(xn.a,null,r.a.createElement(cr.a,null)),r.a.createElement(da.a,{primary:"Block User"})),n&&r.a.createElement(ur,{to:"/add-warning",onClick:o},r.a.createElement(xn.a,null,r.a.createElement(cr.a,null)),r.a.createElement(da.a,{primary:"Add Warning"}))));function o(){i||l()}});var dr=Object(i.b)(function(e){var t=e.ui.sidebarOpened,a=e.auth.user;return{open:t,isAdmin:a&&U(a),isModerator:a&&M(a)}},function(e){return{closeSidebar:function(){e({type:m})}}})(mr),fr=a(354),hr=a(355),pr=a(176),Er=a.n(pr);function gr(e){var t=e.size,a=void 0===t?5:t,c=e.text,l=void 0===c?"":c,i=Object(n.useMemo)(function(){return{marginLeft:a,marginRight:a}},[a]);return r.a.createElement("span",{style:i},l)}var br=a(174),vr=a.n(br);var Or=Object(i.b)(function(e){var t=e.auth.user;return{displayName:t&&t.name}},function(e){return{handleLogout:function(){e(function(e){L(),window.location.reload()})}}})(function(e){var t=e.displayName,a=e.handleLogout,n=r.a.useState(),c=Object(Dt.a)(n,2),l=c[0],i=c[1];return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(Me.a,{variant:"subtitle1",color:"inherit"},"Hi, ",t),r.a.createElement(Ze.a,{edge:"end","aria-label":"account of current user","aria-controls":"menu-user","aria-haspopup":"true",onClick:function(e){return i(e.target)},color:"inherit"},r.a.createElement(vr.a,null)),r.a.createElement(In.a,{anchorEl:l,anchorOrigin:{vertical:"bottom",horizontal:"right"},id:"menu-user",keepMounted:!0,transformOrigin:{vertical:"bottom",horizontal:"right"},open:!!l,onClose:function(){return i(null)}},r.a.createElement(Le.a,{onClick:a},"Logout"))):null}),Cr=a(175),yr=a.n(Cr),jr=Object(De.a)(function(){return{scheduleBox:{display:"flex",justifyContent:"flex-start",alignItems:"center",marginTop:20}}});function kr(){var e=jr(),t=Object(i.c)(),a=Ft(),c=a.open,l=a.handleClose,o=a.handleOpen,s=Object(n.useMemo)(function(){return new Date},[]),u=Object(i.d)(function(e){return e.confessions}),m=u.lastNumber,d=u.lastPublishTime,f=u.minutesBetweenPost,h=Object(n.useMemo)(function(){return d?new Date(d):new Date},[d]),p=At({lastNumber:m,lastPublishTime:h,minutesBetweenPost:f}),E=p.values,g=p.setFields,b=p.handleChange;return Object(n.useEffect)(function(){c&&g({lastNumber:m,lastPublishTime:h,minutesBetweenPost:f})},[c,m,h,f]),r.a.createElement(r.a.Fragment,null,r.a.createElement(Ze.a,{onClick:o,color:"inherit"},r.a.createElement(yr.a,null)),r.a.createElement(Ot.a,{open:c,onClose:l,"aria-labelledby":"form-dialog-title",fullWidth:!0},r.a.createElement(Ct.a,{id:"form-dialog-title"},"C\xe0i \u0111\u1eb7t"),r.a.createElement(yt.a,null,r.a.createElement(jt.a,null,"C\xe0i \u0111\u1eb7t \u0111\u0103ng confession:"),r.a.createElement(kt.a,{autoFocus:!0,margin:"dense",name:"lastNumber",value:E.lastNumber,onChange:b,label:"S\u1ed1 confession cu\u1ed1i",type:"number"}),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(kt.a,{margin:"dense",name:"minutesBetweenPost",value:E.minutesBetweenPost,onChange:b,label:"Kho\u1ea3ng c\xe1ch gi\u1eefa c\xe1c confessions (ph\xfat)",type:"number",fullWidth:!0}),r.a.createElement("div",{className:e.scheduleBox},r.a.createElement("span",{style:{marginRight:10}},"\u0110\u0103ng l\u1ea7n cu\u1ed1i l\xfac:"),r.a.createElement(Nt.a,{selected:E.lastPublishTime,onChange:function(e){return b("lastPublishTime",e)},minDate:s,showTimeSelect:!0,timeFormat:"HH:mm",timeIntervals:15,timeCaption:"time",dateFormat:"dd/MM/yyyy HH:mm",withPortal:!0}))),r.a.createElement(It.a,null,r.a.createElement(Pe.a,{onClick:l},"H\u1ee7y"),r.a.createElement(Pe.a,{onClick:function(){t(me(E.lastPublishTime.getTime())),t(ue(Number(E.lastNumber))),t((e=Number(E.minutesBetweenPost),{type:le,payload:e})),l();var e},color:"secondary"},"L\u01b0u"))))}var Sr=Object(Re.a)(function(e){return{appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),zIndex:e.zIndex.drawer+1},appBarShift:{width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},menuButton:{marginLeft:12,marginRight:20},hide:{display:"none"},toolbar:{display:"flex",paddingRight:20},grow:{flexGrow:999}}})(function(e){var t=e.classes,a=e.sidebarOpened,n=e.openSidebar,c=e.user;return r.a.createElement(fr.a,{position:"fixed",className:_e()(t.appBar,Object(R.a)({},t.appBarShift,a))},r.a.createElement(hr.a,{disableGutters:!a,className:t.toolbar},r.a.createElement(Ze.a,{color:"inherit","aria-label":"Open sidebar",onClick:n,className:_e()(t.menuButton,a&&t.hide)},r.a.createElement(Er.a,null)),r.a.createElement("div",{className:t.grow}),c&&r.a.createElement(Mt,null),r.a.createElement(gr,{size:10}),c&&r.a.createElement(kr,null),r.a.createElement(gr,{size:10}),r.a.createElement(Or,null)))});var wr=Object(i.b)(function(e){return{sidebarOpened:e.ui.sidebarOpened,user:e.auth.user}},function(e){return{openSidebar:function(){e({type:u})}}})(Sr);var Ir=Object(Re.a)(function(e){return{drawerHeader:Object(j.a)({display:"flex",alignItems:"center",padding:"0 8px"},e.mixins.toolbar,{justifyContent:"flex-end"}),content:Object(R.a)({flexGrow:1,transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240,height:"calc(100vh - 64px)",width:"100%"},A.MD,{padding:e.spacing(3)}),contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}})(Object(i.b)(function(e){return{sidebarOpened:e.ui.sidebarOpened}})(function(e){var t=e.classes,a=e.sidebarOpened,n=e.children;return r.a.createElement("main",{className:_e()(t.content,Object(R.a)({},t.contentShift,a))},r.a.createElement("div",{className:t.drawerHeader}),n)})),Rr=a(361),xr=a(177),Tr=a.n(xr);var Nr=Object(Re.a)(function(e){return{close:{padding:e.spacing(.5)}}})(function(e){var t=e.classes,a=e.messageText,n=e.messageKey,c=e.opened,l=e.onExited,i=e.onClosed;return r.a.createElement(Rr.a,{key:n,anchorOrigin:{vertical:"bottom",horizontal:"left"},open:c,autoHideDuration:6e3,onClose:i,onExited:l,ContentProps:{"aria-describedby":"message-id"},message:r.a.createElement("span",{id:"message-id"},a),action:[r.a.createElement(Ze.a,{key:"close","aria-label":"Close",color:"inherit",className:t.close,onClick:i},r.a.createElement(Tr.a,null))]})});var _r=Object(i.b)(function(e){var t=e.notification,a=t.messageText,n=t.messageKey;return{opened:t.opened,messageText:a,messageKey:n}},function(e){return{onExited:function(){e(O())},onClosed:function(t,a){"clickaway"!==a&&e(b())}}})(Nr),Dr=I?we.a:Ie.a;var Fr=Object(Re.a)(function(){return{root:{display:"flex"}}})(function(e){var t=e.classes;return r.a.createElement(Dr,{basename:w},r.a.createElement("div",{className:t.root},r.a.createElement(xe.a,null),r.a.createElement(wr,null),r.a.createElement(dr,null),r.a.createElement(Ir,null,r.a.createElement(Jn,null)),r.a.createElement(_r,null)))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(function(){return r.a.createElement(i.a,{store:Se},r.a.createElement(Fr,null))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[203,1,2]]]);